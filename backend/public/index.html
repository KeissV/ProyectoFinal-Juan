<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Kiosco Autoservicio</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="kiosk-layout">
    <!-- PANEL IZQUIERDO: ESC√ÅNER + BUSCADOR -->
    <section class="left-panel">
      <header class="header">
        <h1>Kiosco Autoservicio</h1>
        <p class="subtitle">Escanee o busque productos para agregarlos al carrito.</p>
      </header>

      <div class="scanner-card">
        <h2>Zona de escaneo (c√°mara)</h2>
        <video id="video" class="video-preview" autoplay muted playsinline></video>
        <div class="scanner-status" id="scanner-status">
          C√°mara lista. Presione "Iniciar esc√°ner".
        </div>
        <div class="scanner-buttons">
          <button id="btnStart" class="btn btn-primary">‚ñ∂ Iniciar esc√°ner</button>
          <button id="btnStop" class="btn btn-secondary">‚èπ Detener esc√°ner</button>
        </div>
      </div>

      <div class="info-card">
        <h2>√öltimo producto detectado</h2>
        <p id="last-scan-text">A√∫n no se ha escaneado ning√∫n producto.</p>
      </div>

      <div class="search-card">
        <h2>Buscar producto</h2>
        <input
          type="text"
          id="search-input"
          placeholder="Escriba el nombre del producto..."
          class="search-input"
        />
        <div id="search-results" class="search-results">
          <p>Escriba para buscar productos.</p>
        </div>
      </div>
    </section>

    <!-- PANEL DERECHO: CARRITO + FACTURA -->
    <section class="right-panel">
      <div class="cart-card">
        <h2>Carrito de compras</h2>
        <div id="cart-items" class="cart-items">
          <p>Sin productos. Escanee o agregue desde el buscador.</p>
        </div>
        <div class="cart-total">
          <span>Total:</span>
          <span id="cart-total">‚Ç°0</span>
        </div>
        <div class="cart-buttons">
          <button id="btnPay" class="btn btn-primary">üí≥ Pagar</button>
          <button id="btnClear" class="btn btn-danger">üóë Vaciar carrito</button>
        </div>
      </div>

      <div class="ticket-card">
        <h2>Factura / Ticket</h2>
        <div id="ticket" class="ticket">
          <p>Realice una compra para generar la factura.</p>
        </div>
      </div>
    </section>
  </div>

  <!-- Modal ingreso manual -->
<div id="manualModal" class="modal" style="display:none;">
  <div class="modal-content">
    <h3>No se pudo escanear</h3>
    <p>Ingrese el c√≥digo manualmente:</p>

    <input type="text" id="codigoManualInput" class="input-manual" />

    <div class="modal-actions">
      <button id="btnManualEnviar" class="btn btn-primary">Agregar</button>
      <button id="btnManualCerrar" class="btn btn-secondary">Cancelar</button>
    </div>
  </div>
</div>

<style>
  .modal {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.6);
    display:flex;
    align-items:center;
    justify-content:center;
    z-index:9999;
  }
  .modal-content {
    background:white;
    padding:20px;
    border-radius:12px;
    width:300px;
    max-width:90%;
    text-align:center;
    box-shadow:0 10px 30px rgba(0,0,0,0.25);
  }
  .input-manual {
    width:100%;
    padding:8px;
    margin:12px 0;
    font-size:16px;
  }
  .modal-actions {
    display:flex;
    justify-content:space-between;
    gap:10px;
  }
  .btn-secondary {
    background:#ccc;
    border:none;
    padding:8px 12px;
    border-radius:6px;
  }
</style>

  <!-- Modal de confirmaci√≥n de impresi√≥n -->
  <div id="print-modal" class="modal hidden">
    <div class="modal-content">
      <p>¬øDesea imprimir la factura?</p>
      <div class="modal-buttons">
        <button id="modal-yes" class="btn btn-primary">S√≠</button>
        <button id="modal-no" class="btn btn-secondary">No</button>
      </div>
    </div>
  </div>

  <!-- ZXing para el esc√°ner -->
  <script src="https://unpkg.com/@zxing/library@latest"></script>
  <!-- L√≥gica del kiosco -->
  <script src="app.js"></script>

</body>
</html>
